<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <p class="title">Faculty of Medicine and Health</p>
      <div class="title-bottom">
        <div class="title-bottom-wrapper busy-wrapper">
          <div class="title-bottom-dot busy-dot"></div>
        </div>
        <p>Busy | Representative Samantha Bailey</p>
      </div>
      <hr />

      <div class="messages">
        <div class="primary">
          <p class="primary-text">
            Thanks so much for your assistance today Samantha. ðŸ™‚
          </p>
        </div>
        <div class="primary">
          <p class="primary-text">I really appreciate it.</p>
        </div>
        <div class="secondary">
          <p class="secondary-text">
            I'm glad I could help, have a great day! ðŸ˜Š
          </p>
        </div>
        <p class="finished-text-small">Samantha has ended the chat</p>
        <div class="finished">
          <div class="image">
            <div class="circle">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                ></path>
              </svg>
            </div>
          </div>
          <p class="finished-text">This chat has now ended</p>
          <div>
            <p class="finished-text-secondary">
              You can close this window now.
            </p>
            <p class="finished-text-secondary">
              You can also leave us some feedback below.
            </p>
          </div>
          <div class="close-buttons">
            <div class="cta feedback" id="submitFeedback">Submit feedback</div>
            <div class="cta close" id="closeWindow">Close window</div>
          </div>
        </div>
      </div>

      <hr />
      <div class="button-group">
        <input class="input" type="text" placeholder="Type your message..." />
        <div class="cta disabled">
          <div class="send-chat">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="white"
              viewBox="0 0 512 512"
              stroke-width="1.5"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M49.9 27.8C15.1 12.7-19.2 50.1-1.2 83.5L68.1 212.2c4.4 8.3 12.6 13.8 21.9 15c0 0 0 0 0 0l176 22c3.4 .4 6 3.3 6 6.7s-2.6 6.3-6 6.7l-176 22s0 0 0 0c-9.3 1.2-17.5 6.8-21.9 15L-1.2 428.5c-18 33.4 16.3 70.8 51.1 55.7L491.8 292.7c32.1-13.9 32.1-59.5 0-73.4L49.9 27.8z"
              ></path>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const submitFeedbackBtn = document.getElementById('submitFeedback');
        const closeWindowBtn = document.getElementById('closeWindow');
        const messagesDiv = document.querySelector('.messages'); 

        if (submitFeedbackBtn) {
          submitFeedbackBtn.addEventListener('click', function() {
            // Create and configure a satisfaction checkbox
            const feedbackSelector = document.createElement('select');
            feedbackSelector.classList.add('feedback-selector');
            feedbackSelector.innerHTML = `
              <option value="">Please Select...</option>
              <option value="very-satisfied">Very satisfied</option>
              <option value="satisfied">Satisfied</option>
              <option value="not-satisfied">Dissatisfied</option>
            `;
            // Insert dropdown menu behind button
            submitFeedbackBtn.parentNode.insertBefore(feedbackSelector, submitFeedbackBtn.nextSibling);
          });
        }
      
        if (closeWindowBtn) {
          closeWindowBtn.addEventListener('click', function() {
            // Get the current date and time and format it as year, month, day, hour, minute and second
            const now = new Date();
            const formattedTime = now.toLocaleDateString('zh-CN', {
              year: 'numeric', month: '2-digit', day: '2-digit'
            }) + ' ' + now.toLocaleTimeString('zh-CN');
      
            // Create and configure end time messages
            const timeMessage = document.createElement('div');
            // Use existing style class
            timeMessage.className = 'finished-text-small'; 
            timeMessage.textContent = `Chat ends atï¼š${formattedTime}`;
            timeMessage.style.textAlign = 'center';

            // Add end time message to chat
            messagesDiv.appendChild(timeMessage); 
          });
        }
      });
      </script>

  </body>
</html>
